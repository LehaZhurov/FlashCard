var J=(c,e,i)=>{if(!e.has(c))throw TypeError("Cannot "+i)};var t=(c,e,i)=>(J(c,e,"read from private field"),i?i.call(c):e.get(c)),h=(c,e,i)=>{if(e.has(c))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(c):e.set(c,i)},K=(c,e,i,n)=>(J(c,e,"write to private field"),n?n.call(c,i):e.set(c,i),i);var r=(c,e,i)=>(J(c,e,"access private method"),i);/**
 * @class ItcSlider
 * @version 1.0.0
 * @author https://github.com/itchief
 * @copyright Alexander Maltsev 2020 - 2022
 * @license MIT (https://github.com/itchief/ui-components/blob/master/LICENSE)
 * @tutorial https://itchief.ru/javascript/slider
 */var O,R,B,g,q,I,w,L,P,E,x,l,s,S,it,D,nt,H,rt,W,ht,M,Q,C,U,F,at,X,ot,V,ct,j,lt,k,dt,z,ut,d,m,T,Y,$,Z,p,v,_,tt,y,st,A,et,b,N;class u{constructor(e,i={},n="itc-slider__"){h(this,S);h(this,D);h(this,H);h(this,W);h(this,M);h(this,C);h(this,F);h(this,X);h(this,V);h(this,j);h(this,k);h(this,z);h(this,d);h(this,T);h(this,$);h(this,p);h(this,_);h(this,y);h(this,A);h(this,b);h(this,l,void 0);h(this,s,void 0);K(this,s,{prefix:n,el:e,elWrapper:e.querySelector(`.${n}${t(this.constructor,O)}`),elItems:e.querySelector(`.${n}${t(this.constructor,R)}`),elListItem:e.querySelectorAll(`.${n}${t(this.constructor,B)}`),btnPrev:e.querySelector(`.${n}${t(this.constructor,w)}`),btnNext:e.querySelector(`.${n}${t(this.constructor,L)}`),btnClassHide:n+t(this.constructor,P),exOrderMin:0,exOrderMax:0,exItemMin:null,exItemMax:null,exTranslateMin:0,exTranslateMax:0,direction:"next",intervalId:null,isSwiping:!1,swipeX:0}),K(this,l,{loop:!0,autoplay:!1,interval:5e3,refresh:!0,swipe:!0,...i}),r(this,y,st).call(this),r(this,k,dt).call(this)}static getInstance(e){const i=t(this,x).find(n=>n.target===e);return i?i.instance:null}static getOrCreateInstance(e,i={},n="itc-slider__"){try{const o=typeof e=="string"?document.querySelector(e):e,a=this.getInstance(o);if(a)return a;const f=new this(o,i,n);return t(this,x).push({target:o,instance:f}),f}catch(o){console.error(o)}}static createInstances(){document.querySelectorAll('[data-slider="itc-slider"]').forEach(e=>{const i=e.dataset,n={};Object.keys(i).forEach(o=>{if(o==="slider")return;let a=i[o];a=a==="true"?!0:a,a=a==="false"?!1:a,a=Number.isNaN(Number(a))?Number(a):a,n[o]=a}),this.getOrCreateInstance(e,n)})}next(){t(this,s).direction="next",r(this,p,v).call(this)}prev(){t(this,s).direction="prev",r(this,p,v).call(this)}moveTo(e){r(this,_,tt).call(this,e)}reset(){r(this,A,et).call(this)}dispose(){r(this,z,ut).call(this);const e=t(this,s).prefix+t(this.constructor,E),i=t(this,s).prefix+t(this.constructor,g);r(this,d,m).call(this,"stop"),t(this,s).elItems.classList.add(e),t(this,s).elItems.style.transform="",t(this,s).elListItem.forEach(a=>{a.style.transform="",a.classList.remove(i)});const n=`${t(this,s).prefix}${t(this.constructor,I)}`;document.querySelectorAll(`.${n}`).forEach(a=>{a.classList.remove(n)}),t(this,s).elItems.offsetHeight,t(this,s).elItems.classList.remove(e);const o=t(this.constructor,x).findIndex(a=>a.target===t(this,s).el);t(this.constructor,x).splice(o,1)}}O=new WeakMap,R=new WeakMap,B=new WeakMap,g=new WeakMap,q=new WeakMap,I=new WeakMap,w=new WeakMap,L=new WeakMap,P=new WeakMap,E=new WeakMap,x=new WeakMap,l=new WeakMap,s=new WeakMap,S=new WeakSet,it=function(e){const i=t(this,s).prefix+t(this.constructor,w),n=t(this,s).prefix+t(this.constructor,L);if(r(this,d,m).call(this,"stop"),e.target.closest(`.${i}`)||e.target.closest(`.${n}`))t(this,s).direction=e.target.closest(`.${i}`)?"prev":"next",r(this,p,v).call(this);else if(e.target.dataset.slideTo){const o=parseInt(e.target.dataset.slideTo,10);r(this,_,tt).call(this,o)}t(this,l).loop&&r(this,d,m).call(this)},D=new WeakSet,nt=function(){r(this,d,m).call(this,"stop")},H=new WeakSet,rt=function(){r(this,d,m).call(this)},W=new WeakSet,ht=function(){window.requestAnimationFrame(r(this,A,et).bind(this))},M=new WeakSet,Q=function(e){r(this,d,m).call(this,"stop");const i=e.type.search("touch")===0?e.touches[0]:e;t(this,s).swipeX=i.clientX,t(this,s).isSwiping=!0},C=new WeakSet,U=function(e){if(!t(this,s).isSwiping)return;const i=e.type.search("touch")===0?e.changedTouches[0]:e,n=t(this,s).swipeX-i.clientX;n>50?(t(this,s).direction="next",r(this,p,v).call(this)):n<-50&&(t(this,s).direction="prev",r(this,p,v).call(this)),t(this,s).isSwiping=!1,t(this,l).loop&&r(this,d,m).call(this)},F=new WeakSet,at=function(){t(this,s).isBalancing||(t(this,s).isBalancing=!0,window.requestAnimationFrame(r(this,T,Y).bind(this)))},X=new WeakSet,ot=function(){t(this,s).isBalancing=!1},V=new WeakSet,ct=function(e){e.preventDefault()},j=new WeakSet,lt=function(){document.visibilityState==="hidden"?r(this,d,m).call(this,"stop"):document.visibilityState==="visible"&&t(this,l).loop&&r(this,d,m).call(this)},k=new WeakSet,dt=function(){t(this,s).events={click:[t(this,s).el,r(this,S,it).bind(this),!0],mouseenter:[t(this,s).el,r(this,D,nt).bind(this),!0],mouseleave:[t(this,s).el,r(this,H,rt).bind(this),!0],resize:[window,r(this,W,ht).bind(this),t(this,l).refresh],"itc-slider__transition-start":[t(this,s).elItems,r(this,F,at).bind(this),t(this,l).loop],transitionend:[t(this,s).elItems,r(this,X,ot).bind(this),t(this,l).loop],touchstart:[t(this,s).el,r(this,M,Q).bind(this),t(this,l).swipe],mousedown:[t(this,s).el,r(this,M,Q).bind(this),t(this,l).swipe],touchend:[document,r(this,C,U).bind(this),t(this,l).swipe],mouseup:[document,r(this,C,U).bind(this),t(this,l).swipe],dragstart:[t(this,s).el,r(this,V,ct).bind(this),!0],visibilitychange:[document,r(this,j,lt).bind(this),!0]},Object.keys(t(this,s).events).forEach(e=>{if(t(this,s).events[e][2]){const i=t(this,s).events[e][0],n=t(this,s).events[e][1];i.addEventListener(e,n)}})},z=new WeakSet,ut=function(){Object.keys(t(this,s).events).forEach(e=>{if(t(this,s).events[e][2]){const i=t(this,s).events[e][0],n=t(this,s).events[e][1];i.removeEventListener(e,n)}})},d=new WeakSet,m=function(e){if(!!t(this,l).autoplay){if(e==="stop"){clearInterval(t(this,s).intervalId),t(this,s).intervalId=null;return}t(this,s).intervalId===null&&(t(this,s).intervalId=setInterval(()=>{t(this,s).direction="next",r(this,p,v).call(this)},t(this,l).interval))}},T=new WeakSet,Y=function(){if(!t(this,s).isBalancing)return;const e=t(this,s).elWrapper.getBoundingClientRect(),i=e.width/t(this,s).countActiveItems/2,n=t(this,s).elListItem.length;if(t(this,s).direction==="next"){if(t(this,s).exItemMin.getBoundingClientRect().right<e.left-i){const a=t(this,s).els.find(G=>G.el===t(this,s).exItemMin);a.order=t(this,s).exOrderMin+n;const f=t(this,s).exTranslateMin+n*t(this,s).width;a.translate=f,t(this,s).exItemMin.style.transform=`translate3D(${f}px, 0px, 0.1px)`,r(this,b,N).call(this)}}else if(t(this,s).exItemMax.getBoundingClientRect().left>e.right+i){const a=t(this,s).els.find(G=>G.el===t(this,s).exItemMax);a.order=t(this,s).exOrderMax-n;const f=t(this,s).exTranslateMax-n*t(this,s).width;a.translate=f,t(this,s).exItemMax.style.transform=`translate3D(${f}px, 0px, 0.1px)`,r(this,b,N).call(this)}window.requestAnimationFrame(r(this,T,Y).bind(this))},$=new WeakSet,Z=function(){const e=t(this,s).prefix+t(this.constructor,g);t(this,s).activeItems.forEach((i,n)=>{i?t(this,s).elListItem[n].classList.add(e):t(this,s).elListItem[n].classList.remove(e);const o=t(this,s).el.querySelectorAll(`.${t(this,s).prefix}${t(this.constructor,q)}`);o.length&&i?o[n].classList.add(`${t(this,s).prefix}${t(this.constructor,I)}`):o.length&&!i&&o[n].classList.remove(`${t(this,s).prefix}${t(this.constructor,I)}`)})},p=new WeakSet,v=function(){const e=t(this,s).direction==="next"?-t(this,s).width:t(this,s).width,i=t(this,s).translate+e;if(!t(this,l).loop){const n=t(this,s).width*(t(this,s).elListItem.length-t(this,s).countActiveItems);if(i<-n||i>0)return;t(this,s).btnPrev&&(t(this,s).btnPrev.classList.remove(t(this,s).btnClassHide),t(this,s).btnNext.classList.remove(t(this,s).btnClassHide)),t(this,s).btnPrev&&i===-n?t(this,s).btnNext.classList.add(t(this,s).btnClassHide):t(this,s).btnPrev&&i===0&&t(this,s).btnPrev.classList.add(t(this,s).btnClassHide)}t(this,s).direction==="next"?t(this,s).activeItems=[...t(this,s).activeItems.slice(-1),...t(this,s).activeItems.slice(0,-1)]:t(this,s).activeItems=[...t(this,s).activeItems.slice(1),...t(this,s).activeItems.slice(0,1)],r(this,$,Z).call(this),t(this,s).translate=i,t(this,s).elItems.style.transform=`translate3D(${i}px, 0px, 0.1px)`,t(this,s).elItems.dispatchEvent(new CustomEvent("itc-slider__transition-start",{bubbles:!0}))},_=new WeakSet,tt=function(e){const i=t(this,s).activeItems.reduce((n,o,a)=>{const f=o?e-a:n;return Math.abs(f)<Math.abs(n)?f:n},t(this,s).activeItems.length);if(i!==0){t(this,s).direction=i>0?"next":"prev";for(let n=0;n<Math.abs(i);n++)r(this,p,v).call(this)}},y=new WeakSet,st=function(){t(this,s).els=[],t(this,s).translate=0,t(this,s).activeItems=[],t(this,s).isBalancing=!1,t(this,s).width=t(this,s).elListItem[0].getBoundingClientRect().width;const e=t(this,s).elWrapper.getBoundingClientRect().width;if(t(this,s).countActiveItems=Math.round(e/t(this,s).width),t(this,s).elListItem.forEach((i,n)=>{i.style.transform="",t(this,s).activeItems.push(n<t(this,s).countActiveItems?1:0),t(this,s).els.push({el:i,index:n,order:n,translate:0})}),t(this,l).loop){const i=t(this,s).elListItem.length-1,n=-(i+1)*t(this,s).width;t(this,s).elListItem[i].style.transform=`translate3D(${n}px, 0px, 0.1px)`,t(this,s).els[i].order=-1,t(this,s).els[i].translate=n,r(this,b,N).call(this)}else t(this,s).btnPrev&&t(this,s).btnPrev.classList.add(t(this,s).btnClassHide);r(this,$,Z).call(this),r(this,d,m).call(this)},A=new WeakSet,et=function(){const e=t(this,s).prefix+t(this.constructor,E),i=t(this,s).elListItem[0].getBoundingClientRect().width,n=t(this,s).elWrapper.getBoundingClientRect().width,o=Math.round(n/i);i===t(this,s).width&&o===t(this,s).countActiveItems||(r(this,d,m).call(this,"stop"),t(this,s).elItems.classList.add(e),t(this,s).elItems.style.transform="translate3D(0px, 0px, 0.1px)",r(this,y,st).call(this),window.requestAnimationFrame(()=>{t(this,s).elItems.classList.remove(e)}))},b=new WeakSet,N=function(){const e=t(this,s).els.map(a=>a.el),i=t(this,s).els.map(a=>a.order);t(this,s).exOrderMin=Math.min(...i),t(this,s).exOrderMax=Math.max(...i);const n=i.indexOf(t(this,s).exOrderMin),o=i.indexOf(t(this,s).exOrderMax);t(this,s).exItemMin=e[n],t(this,s).exItemMax=e[o],t(this,s).exTranslateMin=t(this,s).els[n].translate,t(this,s).exTranslateMax=t(this,s).els[o].translate},h(u,O,"wrapper"),h(u,R,"items"),h(u,B,"item"),h(u,g,"item_active"),h(u,q,"indicator"),h(u,I,"indicator_active"),h(u,w,"btn_prev"),h(u,L,"btn_next"),h(u,P,"btn_hide"),h(u,E,"transition-none"),h(u,x,[]);u.createInstances();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".slider").forEach(c=>{u.getOrCreateInstance(c)})});
