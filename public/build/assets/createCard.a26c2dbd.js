import{S as x,s as R,a as U,g as V}from"./cardCollection.31e443bc.js";var j=function(){return function(r,e){var t=document.querySelector(r),i=t.querySelector(".slider__items"),s=t.querySelectorAll(".slider__item"),u=t.querySelectorAll(".slider__control"),T=0,I=0,H=100,o=[],M,w,d=0,C=s.length-1,P=50,f={isAutoplay:!0,directionAutoplay:"next",delayAutoplay:2e3,isPauseOnHover:!0};for(var k in e)k in f&&(f[k]=e[k]);for(var S=0,X=s.length;S<X;S++)o.push({item:s[S],position:S,transform:0});var y={getItemIndex:function(l){for(var n=0,c=0,a=o.length;c<a;c++)(o[c].position<o[n].position&&l==="min"||o[c].position>o[n].position&&l==="max")&&(n=c);return n},getItemPosition:function(l){return o[y.getItemIndex(l)].position}},g=function(l){var n,c=d;l==="next"?(T++,T>y.getItemPosition("max")&&(n=y.getItemIndex("min"),o[n].position=y.getItemPosition("max")+1,o[n].transform+=o.length*100,o[n].item.style.transform="translateX("+o[n].transform+"%)"),I-=H,d=d+1,d>C&&(d=0)):(T--,T<y.getItemPosition("min")&&(n=y.getItemIndex("max"),o[n].position=y.getItemPosition("min")-1,o[n].transform-=o.length*100,o[n].item.style.transform="translateX("+o[n].transform+"%)"),I+=H,d=d-1,d<0&&(d=C)),i.style.transform="translateX("+I+"%)",w[c].classList.remove("active"),w[d].classList.add("active")},D=function(l){for(var n=0,c=l>d?"next":"prev";l!==d&&n<=C;)g(c),n++},v=function(){!f.isAutoplay||(L(),M=setInterval(function(){g(f.directionAutoplay)},f.delayAutoplay))},L=function(){clearInterval(M)},W=function(){var l=document.createElement("ol");l.classList.add("slider__indicators");for(var n=0,c=s.length;n<c;n++){var a=document.createElement("li");a.innerHTML=n,n===0&&a.classList.add("active"),a.setAttribute("data-slide-to",n),l.appendChild(a)}t.appendChild(l),w=t.querySelectorAll(".slider__indicators > li")},B=function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},F=function(){var l=0;if(B())t.addEventListener("touchstart",function(a){l=a.changedTouches[0].clientX,v()}),t.addEventListener("touchend",function(a){var N=a.changedTouches[0].clientX,G=N-l;G>P?g("prev"):G<-P&&g("next"),v()});else for(var n=0,c=u.length;n<c;n++)u[n].classList.add("slider__control_show");t.addEventListener("click",function(a){a.target.classList.contains("slider__control")?(a.preventDefault(),g(a.target.classList.contains("slider__control_next")?"next":"prev"),v()):a.target.getAttribute("data-slide-to")&&(a.preventDefault(),D(parseInt(a.target.getAttribute("data-slide-to"))),v())}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"?L():v()},!1),f.isPauseOnHover&&f.isAutoplay&&(t.addEventListener("mouseenter",function(){L()}),t.addEventListener("mouseleave",function(){v()}))};return W(),F(),v(),{next:function(){g("next")},left:function(){g("prev")},stop:function(){f.isAutoplay=!1,L()},cycle:function(){f.isAutoplay=!0,v()}}}}();function z(r){x("GET","/word/create/"+r).then(e=>{}).catch(e=>{console.log(e)})}let p=[],O=document.querySelector("#stepOneDisplay"),b=document.querySelector("#stepTooDisplay"),E=document.querySelector("#stepThreeDisplay"),m=document.querySelector("#word"),h=document.querySelector("#btn-step-one");h.onclick=()=>{J()};let _=5;async function J(){if(!m.value)return!1;z(m.value),m.setAttribute("disabled",!0),p.word=m.value,Y(),await K(m.value),await Q(m.value),O.style.display="none",b.style.display="block",m.removeAttribute("disabled"),j(".slider",{isAutoplay:!1})}function q(){if(!m.hasAttribute("disabled")){h.innerText="\u0414\u0430\u043B\u0435\u0435",h.setAttribute("style","background:var(--secondary-dark)");return}if(_==95)return _=5,q();h.innerText="\u0418\u0449\u0435\u043C \u0433\u0438\u0444\u043A\u0438 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434",setTimeout(()=>{h.setAttribute("style",`background:linear-gradient(110deg, var(--secondary-dark) 0%, 
        var(--secondary-dark) `+(_-5)+"%, rgba(239,239,242,1) "+_+"%, var(--secondary-dark) "+(_+5)+`%, 
        var(--secondary-dark) 100%);`),q()},10),_++}async function K(r){q(),await x("GET","/translation/"+r).then(e=>{p.data=e}).catch(e=>{console.log(e)})}async function Q(r){await x("GET","/gif/search/"+r).then(e=>{Z(e.data),p.gifs=e.data}).catch(e=>{A(),console.log(e)})}function Y(){let r=document.querySelector("#slider-block");r.innerHTML=" ";let e=document.createElement("div");e.setAttribute("class","slider");let t=document.createElement("div");t.setAttribute("class","slider__wrapper");let i=document.createElement("div");i.setAttribute("class","slider__items"),i.setAttribute("id","select-gif");let s=document.createElement("a");s.setAttribute("class","slider__control slider__control_prev"),s.setAttribute("href","#"),s.setAttribute("role","button"),s.innerHTML="<";let u=document.createElement("a");return u.setAttribute("class","slider__control slider__control_next"),u.setAttribute("href","#"),u.setAttribute("role","button"),u.innerHTML=">",e.appendChild(t),t.appendChild(i),t.appendChild(s),t.appendChild(u),r.appendChild(e),!0}function Z(r){try{console.log(r,r.length);let e=r.length,t=document.querySelector("#select-gif");t.innerHTML=" ";for(let i=0;i<e;i++)t.appendChild($(r[i].src))}catch{A()}}function $(r){let e=document.createElement("div");e.setAttribute("class","slider__item");let t=document.createElement("div");t.setAttribute("class","slider-gif");let i=document.createElement("img");return i.src=r,e.appendChild(t),t.appendChild(i),e}document.querySelector("#btn-step-one-prev").onclick=()=>{A()};function A(){m.value="",O.style.display="block",b.style.display="none",E.style.display="none"}document.querySelector("#btn-step-too").onclick=()=>{ee()};function ee(){try{let r=document.querySelector("ol>li.active").innerHTML;p.src=p.gifs[r].src,te(),b.style.display="none",E.style.display="block"}catch{A()}}function te(){let r=document.querySelector("#creatingCardWord");r.innerHTML=" ",r.innerHTML=p.word;let e=document.querySelector("#creatingCardTranslate");e.innerHTML=" ";let t=p.data.translate.length-2;for(let s=0;s<=t;s++){let u=" , ";s==t&&(u=";"),e.innerHTML+=" "+p.data.translate[s]+u}let i=document.querySelector("#creatingCardImg");i.src=p.src}document.querySelector("#btn-step-too-prev").onclick=()=>{ne()};function ne(){b.style.display="none",b.style.display="block",E.style.display="none"}document.querySelector("#btn-save-new-card").onclick=()=>{re()};function re(){A(),R("body","\u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043A\u0430\u0440\u0442\u0443");let r=p.word,e=p.src,t=new FormData;t.append("word",r),t.append("gif",e),x("POST","/card/create",t).then(i=>{U(),location="#close",ie()}).catch(i=>{console.log(i)})}function ie(){window.currentPage<2&&V(1)}
