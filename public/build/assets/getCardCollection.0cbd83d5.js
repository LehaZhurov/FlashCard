async function s(e,t,o=null,n=!0){return new Promise((r,l)=>{const c=new XMLHttpRequest;c.open(e,t,!0),c.responseType="json",c.withCredentials=!0,c.setRequestHeader("X-CSRF-TOKEN",document.head.querySelector("[name=csrf-token]").content),c.readyState==1&&n&&console.log("\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 "+e+" \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430 "+t),c.onload=()=>{c.status>=400?l(c.response):r(c.response)},c.onerror=()=>{l(c.response)},c.send(o)})}function p(e,t){let o={success:"green",danger:"yellow",error:"red"},n;try{n=o[t]}catch{throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0440\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0442\u0438\u043F \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F")}let r=document.createElement("div"),l=document.createElement("span");l.innerText=e,r.appendChild(l),r.setAttribute("style",b(n));let c=document.querySelector("body");c.appendChild(r),setTimeout(function(){c.removeChild(r)},6e3)}function b(e){let t={position:"fixed","background-color":e,right:"0",bottom:"0",margin:"10px","min-height":"50px",padding:"10px",color:"#FFFFFF","min-width":"10vw","text-align":"center","border-radius":"30px",display:"flex","justify-content":"center","align-items":"center","font-size":"20px"},o="";for(var n in t)o=o+n+":"+t[n]+";";return o}function h(){s("GET","/profile/balance").then(e=>{C(e.data)}).catch(e=>{p(e.message,"error")})}function C(e){let t=document.querySelector("#balance");t.innerText=e.balance}let y="https://i.giphy.com/media/j5sp3actiz8foT88Dp/giphy.webp",a;function f(e,t="\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430"){a=document.querySelector("#"+e),a.classList.add("nonescroll"),g();let o=_(),n=document.createElement("div"),r=k(),l=x(t);n.appendChild(r),o.appendChild(n),o.appendChild(l),a.appendChild(o)}function u(){let e=document.querySelector("#loadblock");e&&(a.removeChild(e),a.classList.remove("nonescroll"))}function k(){let e=document.createElement("img");return e.src=y,e}function x(e){let t=document.createElement("p");return t.innerText=e,t}function _(){let e=document.createElement("div");return e.setAttribute("style",`
            position: absolute;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            background-color: var(--secondary-light);
            flex-direction:column;
            height: `+window.innerHeight+`px;
            z-index:100000;
            align-items: center;
    `),e.setAttribute("id","loadblock"),e}var m;function g(){var e=Math.max(document.body.scrollTop,document.documentElement.scrollTop);return e>0?(window.scrollBy(0,-100),m=setTimeout(g(),20)):clearTimeout(m),!1}function T(e){let t=document.createElement("div");t.setAttribute("class","card-gif");let o=document.createElement("img");return o.src=e.src,t.appendChild(o),t}function v(e){let t=document.createElement("div");t.setAttribute("class","card-text");let o=document.createElement("p");o.innerText=e.word;let n=document.createElement("p"),r=e.info.translate.length;for(let l=0;l<r;l++){let c=" , ";l==r-1&&(c="."),n.innerText+=" "+e.info.translate[l]+c}return t.appendChild(o),t.appendChild(n),t}function E(e,t,o){let n=document.createElement("div");n.setAttribute("class","view-option-and-voice");let r=document.createElement("i");r.setAttribute("class","bx bx-volume-full"),r.onclick=()=>{var c=new Audio;c.src=e.audio,c.autoplay=!0};let l=document.createElement("i");return l.setAttribute("class","bx bxs-cog"),l.onclick=()=>{t.style.display=="none"?(t.style.display="block",o.style.display="none"):(t.style.display="none",o.style.display="block")},n.appendChild(r),n.appendChild(l),n}function A(){window.currentPage<2&&i(1)}function w(e){let t=document.querySelector("#comfim_delete_card"),o=document.querySelector("#aboard_delete_card");location="#deleteCard",t.onclick=()=>(S(e),!0),o.onclick=()=>{location="#close"}}function S(e){f("body","\u0420\u0430\u0441\u043F\u044B\u043B\u044F\u044E..."),s("GET","/card/delete/"+e).then(t=>{location="#close",u(),A(),h()}).catch(t=>{p(t,"error"),u()})}function q(e){location="#addCardToDeck";let t=document.querySelector("#comfim_add_to_deck"),o=document.querySelector("#aboard_add_to_deck");t.onclick=()=>(B(),!0),o.onclick=()=>{location="#close"};let n=document.querySelector("#input_deck_from_add_card");n.value=e}async function B(){let e=document.querySelector("#add_card_to_deck_form"),t=new FormData(e);location="#close",await s("POST","/card/addToDeck",t),p("\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E","success")}function P(e){let t=document.createElement("div");t.setAttribute("class","card-option");let o=document.createElement("div");o.setAttribute("class","button-group-column"),t.appendChild(o);let n=document.createElement("button");n.setAttribute("class","danger"),n.innerText="\u0420\u0430\u0441\u043F\u044B\u043B\u0438\u0442\u044C",n.onclick=()=>{w(e.id)};let r=document.createElement("button");return r.setAttribute("class",""),r.innerText="\u0412 \u043A\u043E\u043B\u043E\u0434\u0443",r.onclick=()=>{q(e.id)},o.appendChild(n),o.appendChild(r),t.appendChild(o),t}function F(e){window.currentPage=e.current_page;let t=document.querySelector("#collection-pagination");t.innerHTML=" ";let o=document.createElement("a");if(o.innerText=e.current_page,o.setAttribute("class","deck-paginte-item active-paginate-item"),o.setAttribute("role","button"),o.onclick=()=>{i(e.current_page)},e.prev_page!=null){let n=document.createElement("a");n.setAttribute("class","deck-paginte-item"),n.innerText=e.prev_page,n.setAttribute("role","button"),n.setAttribute("href","#"+e.prev_page),n.onclick=()=>{i(e.prev_page)},t.appendChild(n)}if(t.appendChild(o),e.next_page!=null){let n=document.createElement("a");n.setAttribute("class","deck-paginte-item"),n.setAttribute("role","button"),n.setAttribute("href","#"+e.next_page),n.innerText=e.next_page,n.onclick=()=>{i(e.next_page)},t.appendChild(n)}}function D(e){let t=document.querySelector("#count_card_current_page"),o=document.querySelector("#count_cards"),n=0;e.next_page==null?n=e.total:n=e.current_page*e.count_item_current_page,t.innerText=n,o.innerText=e.total}let d=document.querySelector("#deck-card"),L=["","common","rare","epic","legend"];function i(e){f("body","\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0432\u0430\u0448\u0443 \u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u044E"),s("GET","/card/getCards/?page="+e).then(t=>{O(),H(t.data),F(t.pagination),D(t.pagination),u()}).catch(t=>{p(t.message,"error"),u()})}function H(e){for(let t=0;t<e.length;t++)d.appendChild(R(e[t]))}function R(e){let t=document.createElement("div");t.setAttribute("class","card "+L[e.level]);let o=T(e),n=v(e),r=P(e),l=E(e,r,n);return t.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(l),t}function O(){for(;d.children.length>1;)d.removeChild(d.lastChild)}export{s as S,i as a,u as b,p as c,w as d,T as e,v as f,h as g,E as h,f as s,A as u};
