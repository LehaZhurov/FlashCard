import{S as L,s as R,a as U}from"./load.4cf3e6c8.js";var V=function(){return function(r,t){var e=document.querySelector(r),s=e.querySelector(".slider__items"),l=e.querySelectorAll(".slider__item"),u=e.querySelectorAll(".slider__control"),A=0,x=0,H=100,i=[],M,I,d=0,w=l.length-1,P=50,f={isAutoplay:!0,directionAutoplay:"next",delayAutoplay:2e3,isPauseOnHover:!0};for(var k in t)k in f&&(f[k]=t[k]);for(var T=0,D=l.length;T<D;T++)i.push({item:l[T],position:T,transform:0});var y={getItemIndex:function(a){for(var n=0,c=0,o=i.length;c<o;c++)(i[c].position<i[n].position&&a==="min"||i[c].position>i[n].position&&a==="max")&&(n=c);return n},getItemPosition:function(a){return i[y.getItemIndex(a)].position}},g=function(a){var n,c=d;a==="next"?(A++,A>y.getItemPosition("max")&&(n=y.getItemIndex("min"),i[n].position=y.getItemPosition("max")+1,i[n].transform+=i.length*100,i[n].item.style.transform="translateX("+i[n].transform+"%)"),x-=H,d=d+1,d>w&&(d=0)):(A--,A<y.getItemPosition("min")&&(n=y.getItemIndex("max"),i[n].position=y.getItemPosition("min")-1,i[n].transform-=i.length*100,i[n].item.style.transform="translateX("+i[n].transform+"%)"),x+=H,d=d-1,d<0&&(d=w)),s.style.transform="translateX("+x+"%)",I[c].classList.remove("active"),I[d].classList.add("active")},G=function(a){for(var n=0,c=a>d?"next":"prev";a!==d&&n<=w;)g(c),n++},v=function(){!f.isAutoplay||(S(),M=setInterval(function(){g(f.directionAutoplay)},f.delayAutoplay))},S=function(){clearInterval(M)},W=function(){var a=document.createElement("ol");a.classList.add("slider__indicators");for(var n=0,c=l.length;n<c;n++){var o=document.createElement("li");o.innerHTML=n,n===0&&o.classList.add("active"),o.setAttribute("data-slide-to",n),a.appendChild(o)}e.appendChild(a),I=e.querySelectorAll(".slider__indicators > li")},B=function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},F=function(){var a=0;if(B())e.addEventListener("touchstart",function(o){a=o.changedTouches[0].clientX,v()}),e.addEventListener("touchend",function(o){var N=o.changedTouches[0].clientX,O=N-a;O>P?g("prev"):O<-P&&g("next"),v()});else for(var n=0,c=u.length;n<c;n++)u[n].classList.add("slider__control_show");e.addEventListener("click",function(o){o.target.classList.contains("slider__control")?(o.preventDefault(),g(o.target.classList.contains("slider__control_next")?"next":"prev"),v()):o.target.getAttribute("data-slide-to")&&(o.preventDefault(),G(parseInt(o.target.getAttribute("data-slide-to"))),v())}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"?S():v()},!1),f.isPauseOnHover&&f.isAutoplay&&(e.addEventListener("mouseenter",function(){S()}),e.addEventListener("mouseleave",function(){v()}))};return W(),F(),v(),{next:function(){g("next")},left:function(){g("prev")},stop:function(){f.isAutoplay=!1,S()},cycle:function(){f.isAutoplay=!0,v()}}}}();function j(r){L("GET","/word/create/"+r).then(t=>{}).catch(t=>{console.log(t)})}let p=[],X=document.querySelector("#stepOneDisplay"),b=document.querySelector("#stepTooDisplay"),C=document.querySelector("#stepThreeDisplay"),m=document.querySelector("#word"),h=document.querySelector("#btn-step-one");h.onclick=()=>{z()};let _=5;function q(){if(!m.hasAttribute("disabled")){h.innerText="\u0414\u0430\u043B\u0435\u0435",h.setAttribute("style","background:var(--secondary-dark)");return}if(_==95)return _=5,q();h.innerText="\u0418\u0449\u0435\u043C \u0433\u0438\u0444\u043A\u0438 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434",setTimeout(()=>{h.setAttribute("style",`background:linear-gradient(110deg, var(--secondary-dark) 0%, 
        var(--secondary-dark) `+(_-5)+"%, rgba(239,239,242,1) "+_+"%, var(--secondary-dark) "+(_+5)+`%, 
        var(--secondary-dark) 100%);`),q()},10),_++}async function z(){if(!m.value)return!1;j(m.value),m.setAttribute("disabled",!0),p.word=m.value,Q(),await J(m.value),await K(m.value),X.style.display="none",b.style.display="block",m.removeAttribute("disabled"),V(".slider",{isAutoplay:!1})}async function J(r){q(),await L("GET","/translation/"+r).then(t=>{p.data=t}).catch(t=>{console.log(t)})}async function K(r){await L("GET","/gif/search/"+r).then(t=>{Y(t.data),p.gifs=t.data}).catch(t=>{E(),console.log(t)})}function Q(){let r=document.querySelector("#slider-block");r.innerHTML=" ";let t=document.createElement("div");t.setAttribute("class","slider");let e=document.createElement("div");e.setAttribute("class","slider__wrapper");let s=document.createElement("div");s.setAttribute("class","slider__items"),s.setAttribute("id","select-gif");let l=document.createElement("a");l.setAttribute("class","slider__control slider__control_prev"),l.setAttribute("href","#"),l.setAttribute("role","button"),l.innerHTML="<";let u=document.createElement("a");return u.setAttribute("class","slider__control slider__control_next"),u.setAttribute("href","#"),u.setAttribute("role","button"),u.innerHTML=">",t.appendChild(e),e.appendChild(s),e.appendChild(l),e.appendChild(u),r.appendChild(t),!0}function Y(r){let t=document.querySelector("#select-gif");t.innerHTML=" ";for(let e=0;e<r.length;e++)t.appendChild(Z(r[e].src))}function Z(r){let t=document.createElement("div");t.setAttribute("class","slider__item");let e=document.createElement("div");e.setAttribute("class","slider-gif");let s=document.createElement("img");return s.src=r,t.appendChild(e),e.appendChild(s),t}document.querySelector("#btn-step-one-prev").onclick=()=>{E()};function E(){m.value="",X.style.display="block",b.style.display="none",C.style.display="none"}document.querySelector("#btn-step-too").onclick=()=>{$()};function $(){let r=document.querySelector("ol>li.active").innerHTML;p.src=p.gifs[r].src,ee(),b.style.display="none",C.style.display="block"}function ee(){let r=document.querySelector("#creatingCardWord");r.innerHTML=" ",r.innerHTML=p.word;let t=document.querySelector("#creatingCardTranslate");t.innerHTML=" ";let e=p.data.translate.length-2;for(let l=0;l<=e;l++){let u=" , ";l==e&&(u=";"),t.innerHTML+=" "+p.data.translate[l]+u}let s=document.querySelector("#creatingCardImg");s.src=p.src}document.querySelector("#btn-step-too-prev").onclick=()=>{te()};function te(){b.style.display="none",b.style.display="block",C.style.display="none"}document.querySelector("#btn-save-new-card").onclick=()=>{ne()};function ne(){E(),R("body","\u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043A\u0430\u0440\u0442\u0443");let r=p.word,t=p.src,e=new FormData;e.append("word",r),e.append("gif",t),L("POST","/card/create",e).then(s=>{U(),location="#close"}).catch(s=>{console.log(s)})}
