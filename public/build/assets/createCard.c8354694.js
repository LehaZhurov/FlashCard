import{S as x,s as U,b as D,u as V,g as j}from"./getCardCollection.3a48e209.js";var z=function(){return function(n,t){var e=document.querySelector(n),i=e.querySelector(".slider__items"),s=e.querySelectorAll(".slider__item"),c=e.querySelectorAll(".slider__control"),y=0,w=0,H=100,a=[],M,I,u=0,k=s.length-1,P=50,p={isAutoplay:!0,directionAutoplay:"next",delayAutoplay:2e3,isPauseOnHover:!0};for(var q in t)q in p&&(p[q]=t[q]);for(var T=0,G=s.length;T<G;T++)a.push({item:s[T],position:T,transform:0});var v={getItemIndex:function(l){for(var r=0,d=0,o=a.length;d<o;d++)(a[d].position<a[r].position&&l==="min"||a[d].position>a[r].position&&l==="max")&&(r=d);return r},getItemPosition:function(l){return a[v.getItemIndex(l)].position}},g=function(l){var r,d=u;l==="next"?(y++,y>v.getItemPosition("max")&&(r=v.getItemIndex("min"),a[r].position=v.getItemPosition("max")+1,a[r].transform+=a.length*100,a[r].item.style.transform="translateX("+a[r].transform+"%)"),w-=H,u=u+1,u>k&&(u=0)):(y--,y<v.getItemPosition("min")&&(r=v.getItemIndex("max"),a[r].position=v.getItemPosition("min")-1,a[r].transform-=a.length*100,a[r].item.style.transform="translateX("+a[r].transform+"%)"),w+=H,u=u-1,u<0&&(u=k)),i.style.transform="translateX("+w+"%)",I[d].classList.remove("active"),I[u].classList.add("active")},B=function(l){for(var r=0,d=l>u?"next":"prev";l!==u&&r<=k;)g(d),r++},m=function(){!p.isAutoplay||(S(),M=setInterval(function(){g(p.directionAutoplay)},p.delayAutoplay))},S=function(){clearInterval(M)},W=function(){var l=document.createElement("ol");l.classList.add("slider__indicators");for(var r=0,d=s.length;r<d;r++){var o=document.createElement("li");o.innerHTML=r,r===0&&o.classList.add("active"),o.setAttribute("data-slide-to",r),l.appendChild(o)}e.appendChild(l),I=e.querySelectorAll(".slider__indicators > li")},F=function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},N=function(){var l=0;if(F())e.addEventListener("touchstart",function(o){l=o.changedTouches[0].clientX,m()}),e.addEventListener("touchend",function(o){var R=o.changedTouches[0].clientX,O=R-l;O>P?g("prev"):O<-P&&g("next"),m()});else for(var r=0,d=c.length;r<d;r++)c[r].classList.add("slider__control_show");e.addEventListener("click",function(o){o.target.classList.contains("slider__control")?(o.preventDefault(),g(o.target.classList.contains("slider__control_next")?"next":"prev"),m()):o.target.getAttribute("data-slide-to")&&(o.preventDefault(),B(parseInt(o.target.getAttribute("data-slide-to"))),m())}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"?S():m()},!1),p.isPauseOnHover&&p.isAutoplay&&(e.addEventListener("mouseenter",function(){S()}),e.addEventListener("mouseleave",function(){m()}))};return W(),N(),m(),{next:function(){g("next")},left:function(){g("prev")},stop:function(){p.isAutoplay=!1,S()},cycle:function(){p.isAutoplay=!0,m()}}}}();function J(n){let t=new FormData;t.append("word",n),x("POST","api/word/create",t).then(e=>{}).catch(e=>{console.log(e)})}function K(){return document.querySelector("#balance").innerText>=1e3}function Q(){let n=document.querySelector("#slider-block");n.innerHTML=" ";let t=document.createElement("div");t.setAttribute("class","slider");let e=document.createElement("div");e.setAttribute("class","slider__wrapper");let i=document.createElement("div");i.setAttribute("class","slider__items"),i.setAttribute("id","select-gif");let s=document.createElement("a");s.setAttribute("class","slider__control slider__control_prev"),s.setAttribute("href","#"),s.setAttribute("role","button"),s.innerHTML="<";let c=document.createElement("a");return c.setAttribute("class","slider__control slider__control_next"),c.setAttribute("href","#"),c.setAttribute("role","button"),c.innerHTML=">",t.appendChild(e),e.appendChild(i),e.appendChild(s),e.appendChild(c),n.appendChild(t),!0}function Y(n){let t=document.createElement("div");t.setAttribute("class","slider__item");let e=document.createElement("div");e.setAttribute("class","slider-gif");let i=document.createElement("img");return i.src=n,t.appendChild(e),e.appendChild(i),t}async function Z(n){return await x("GET","api/translation/"+n).then(t=>t).catch(t=>{console.log(t)})}function $(n){let t=n.length,e=document.querySelector("#select-gif");e.innerHTML=" ";for(let i=0;i<t;i++)e.appendChild(Y(n[i].src))}async function ee(n){U("body","\u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043A\u0430\u0440\u0442\u0443");let t=n.word,e=n.src,i=new FormData;i.append("word",t),i.append("gif",e),await x("POST","/card/create",i).then(s=>{D(),location="#close",V(),j()}).catch(s=>{location="#close",D(),console.log(s)})}function te(n){let t=document.querySelector("#creatingCardWord");t.innerHTML=" ",t.innerHTML=n.word;let e=document.querySelector("#creatingCardTranslate");e.innerHTML=" ";let i=n.data.translate.length;for(let c=0;c<i;c++){let y=" , ";c==i-1&&(y=";"),e.innerHTML+=" "+n.data.translate[c]+y}let s=document.querySelector("#creatingCardImg");s.src=n.src}let _=[],X=document.querySelector("#stepOneDisplay"),A=document.querySelector("#stepTooDisplay"),E=document.querySelector("#stepThreeDisplay"),f=document.querySelector("#word"),b=document.querySelector("#btn-step-one"),h=5;b.onclick=()=>{if(!K())return alert("\u041D\u0435 \u0445\u0432\u0430\u0442\u0430\u0435 \u043F\u044B\u043B\u0438"),location="#close",!1;ne()};document.querySelector("#btn-step-too").onclick=()=>{ie()};document.querySelector("#btn-step-one-prev").onclick=()=>{L()};document.querySelector("#btn-step-too-prev").onclick=()=>{ae()};document.querySelector("#btn-save-new-card").onclick=()=>{ee(_),L()};async function ne(){if(!f.value)return!1;J(f.value),_.word=f.value,f.setAttribute("disabled",!0),Q(),C(),_.data=await Z(f.value),await re(f.value),f.removeAttribute("disabled"),z(".slider",{isAutoplay:!1}),X.style.display="none",A.style.display="block"}function C(){if(!f.hasAttribute("disabled")){b.innerText="\u0414\u0430\u043B\u0435\u0435",b.setAttribute("style","background:var(--secondary-dark)");return}if(h==95)return h=5,C();b.innerText="\u0418\u0449\u0435\u043C \u0433\u0438\u0444\u043A\u0438 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434",setTimeout(()=>{b.setAttribute("style",`background:linear-gradient(110deg, var(--secondary-dark) 0%, 
        var(--secondary-dark) `+(h-5)+"%, rgba(239,239,242,1) "+h+"%, var(--secondary-dark) "+(h+5)+`%, 
        var(--secondary-dark) 100%);`),C()},10),h++}async function re(n){await x("GET","api/gif/search/"+n).then(t=>{$(t.data),_.gifs=t.data}).catch(t=>{L(),console.log(t)})}function L(){f.value="",X.style.display="block",A.style.display="none",E.style.display="none"}function ie(){try{let n=document.querySelector("ol>li.active").innerHTML;_.src=_.gifs[n].src,A.style.display="none",E.style.display="block",te(_)}catch(n){L(),console.log(n)}}function ae(){A.style.display="none",A.style.display="block",E.style.display="none"}
