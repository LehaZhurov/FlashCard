import{S as T,s as U,b as D,u as V,g as j}from"./getCardCollection.bc4caeff.js";var z=function(){return function(t,e){var n=document.querySelector(t),i=n.querySelector(".slider__items"),s=n.querySelectorAll(".slider__item"),c=n.querySelectorAll(".slider__control"),y=0,w=0,P=100,a=[],H,I,u=0,k=s.length-1,M=50,f={isAutoplay:!0,directionAutoplay:"next",delayAutoplay:2e3,isPauseOnHover:!0};for(var q in e)q in f&&(f[q]=e[q]);for(var S=0,G=s.length;S<G;S++)a.push({item:s[S],position:S,transform:0});var v={getItemIndex:function(l){for(var r=0,d=0,o=a.length;d<o;d++)(a[d].position<a[r].position&&l==="min"||a[d].position>a[r].position&&l==="max")&&(r=d);return r},getItemPosition:function(l){return a[v.getItemIndex(l)].position}},g=function(l){var r,d=u;l==="next"?(y++,y>v.getItemPosition("max")&&(r=v.getItemIndex("min"),a[r].position=v.getItemPosition("max")+1,a[r].transform+=a.length*100,a[r].item.style.transform="translateX("+a[r].transform+"%)"),w-=P,u=u+1,u>k&&(u=0)):(y--,y<v.getItemPosition("min")&&(r=v.getItemIndex("max"),a[r].position=v.getItemPosition("min")-1,a[r].transform-=a.length*100,a[r].item.style.transform="translateX("+a[r].transform+"%)"),w+=P,u=u-1,u<0&&(u=k)),i.style.transform="translateX("+w+"%)",I[d].classList.remove("active"),I[u].classList.add("active")},B=function(l){for(var r=0,d=l>u?"next":"prev";l!==u&&r<=k;)g(d),r++},m=function(){!f.isAutoplay||(x(),H=setInterval(function(){g(f.directionAutoplay)},f.delayAutoplay))},x=function(){clearInterval(H)},W=function(){var l=document.createElement("ol");l.classList.add("slider__indicators");for(var r=0,d=s.length;r<d;r++){var o=document.createElement("li");o.innerHTML=r,r===0&&o.classList.add("active"),o.setAttribute("data-slide-to",r),l.appendChild(o)}n.appendChild(l),I=n.querySelectorAll(".slider__indicators > li")},F=function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},N=function(){var l=0;if(F())n.addEventListener("touchstart",function(o){l=o.changedTouches[0].clientX,m()}),n.addEventListener("touchend",function(o){var R=o.changedTouches[0].clientX,O=R-l;O>M?g("prev"):O<-M&&g("next"),m()});else for(var r=0,d=c.length;r<d;r++)c[r].classList.add("slider__control_show");n.addEventListener("click",function(o){o.target.classList.contains("slider__control")?(o.preventDefault(),g(o.target.classList.contains("slider__control_next")?"next":"prev"),m()):o.target.getAttribute("data-slide-to")&&(o.preventDefault(),B(parseInt(o.target.getAttribute("data-slide-to"))),m())}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"?x():m()},!1),f.isPauseOnHover&&f.isAutoplay&&(n.addEventListener("mouseenter",function(){x()}),n.addEventListener("mouseleave",function(){m()}))};return W(),N(),m(),{next:function(){g("next")},left:function(){g("prev")},stop:function(){f.isAutoplay=!1,x()},cycle:function(){f.isAutoplay=!0,m()}}}}();function J(t){return T("POST","api/word/audio/create",t).then(e=>e).catch(e=>{console.log(e)})}function K(t){let e=new FormData;e.append("word",t),T("POST","api/word/create",e).then(n=>{Q(n)&&J(e)}).catch(n=>{console.log(n)})}function Q(t){return t.data.audio=="def"||t.data.audio==""}function Y(){return document.querySelector("#balance").innerText>=1e3}function Z(){let t=document.querySelector("#slider-block");t.innerHTML=" ";let e=document.createElement("div");e.setAttribute("class","slider");let n=document.createElement("div");n.setAttribute("class","slider__wrapper");let i=document.createElement("div");i.setAttribute("class","slider__items"),i.setAttribute("id","select-gif");let s=document.createElement("a");s.setAttribute("class","slider__control slider__control_prev"),s.setAttribute("href","#"),s.setAttribute("role","button"),s.innerHTML="<";let c=document.createElement("a");return c.setAttribute("class","slider__control slider__control_next"),c.setAttribute("href","#"),c.setAttribute("role","button"),c.innerHTML=">",e.appendChild(n),n.appendChild(i),n.appendChild(s),n.appendChild(c),t.appendChild(e),!0}function $(t){let e=document.createElement("div");e.setAttribute("class","slider__item");let n=document.createElement("div");n.setAttribute("class","slider-gif");let i=document.createElement("img");return i.src=t,e.appendChild(n),n.appendChild(i),e}async function ee(t){return await T("GET","api/translation/"+t).then(e=>e).catch(e=>{console.log(e)})}function te(t){let e=t.length,n=document.querySelector("#select-gif");n.innerHTML=" ";for(let i=0;i<e;i++)n.appendChild($(t[i].src))}async function ne(t){U("body","\u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043A\u0430\u0440\u0442\u0443");let e=t.word,n=t.src,i=new FormData;i.append("word",e),i.append("gif",n),await T("POST","/card/create",i).then(s=>{D(),location="#close",V(),j()}).catch(s=>{location="#close",D(),console.log(s)})}function re(t){let e=document.querySelector("#creatingCardWord");e.innerHTML=" ",e.innerHTML=t.word;let n=document.querySelector("#creatingCardTranslate");n.innerHTML=" ";let i=t.data.translate.length;for(let c=0;c<i;c++){let y=" , ";c==i-1&&(y=";"),n.innerHTML+=" "+t.data.translate[c]+y}let s=document.querySelector("#creatingCardImg");s.src=t.src}let h=[],X=document.querySelector("#stepOneDisplay"),A=document.querySelector("#stepTooDisplay"),E=document.querySelector("#stepThreeDisplay"),p=document.querySelector("#word"),_=document.querySelector("#btn-step-one"),b=5;_.onclick=()=>{if(!Y())return alert("\u041D\u0435 \u0445\u0432\u0430\u0442\u0430\u0435 \u043F\u044B\u043B\u0438"),location="#close",!1;ie()};document.querySelector("#btn-step-too").onclick=()=>{oe()};document.querySelector("#btn-step-one-prev").onclick=()=>{L()};document.querySelector("#btn-step-too-prev").onclick=()=>{le()};document.querySelector("#btn-save-new-card").onclick=()=>{ne(h),L()};async function ie(){if(!p.value)return!1;K(p.value),h.word=p.value,p.setAttribute("disabled",!0),Z(),C(),h.data=await ee(p.value),await ae(p.value),p.removeAttribute("disabled"),z(".slider",{isAutoplay:!1}),X.style.display="none",A.style.display="block"}function C(){if(!p.hasAttribute("disabled")){_.innerText="\u0414\u0430\u043B\u0435\u0435",_.disabled=!1,_.setAttribute("style","background:var(--secondary-dark)");return}if(b==95)return b=5,C();_.innerText="\u0418\u0449\u0435\u043C \u0433\u0438\u0444\u043A\u0438 \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434",setTimeout(()=>{_.disabled=!0,_.setAttribute("style",`background:linear-gradient(110deg, var(--secondary-dark) 0%, 
        var(--secondary-dark) `+(b-5)+"%, rgba(239,239,242,1) "+b+"%, var(--secondary-dark) "+(b+5)+`%, 
        var(--secondary-dark) 100%);`),C()},10),b++}async function ae(t){await T("GET","api/gif/search/"+t).then(e=>{te(e.data),h.gifs=e.data}).catch(e=>{L(),console.log(e)})}function L(){p.value="",X.style.display="block",A.style.display="none",E.style.display="none"}function oe(){try{let t=document.querySelector("ol>li.active").innerHTML;h.src=h.gifs[t].src,A.style.display="none",E.style.display="block",re(h)}catch(t){L(),console.log(t)}}function le(){A.style.display="none",A.style.display="block",E.style.display="none"}
